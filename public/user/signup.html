<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="Solchan-Neoul" content="Solchan-Neoul">
    <meta name="description" content="This is Solchan-Neoul main website.">
    <meta name="keywords" content="Solchan-Neoul">
    <meta name="generator" content="Visual Code">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solchan-Neoul | Login</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Charm&family=Oswald:wght@500&display=swap" rel="stylesheet">
    <link rel="icon" href="./favicon.png">
    <link rel="stylesheet" href="./signup.css">
    <link rel="stylesheet" href="../Footer/footer.css">
    <script src=""></script>
  </head>
  <body>
    <script>
      window.onload = function () {
        // Navbar 로딩
        fetch("../Nav/navbar.html")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("navbar-container").innerHTML = data;
          });

        // 버튼 이벤트 리스너 추가
        document.getElementById("btn-registration").addEventListener("click", function(){
          const username = document.getElementById("name").value;
          const userId = document.getElementById("id").value;
          const userpw = document.getElementById("password").value;

          if (!username || !userId || !userpw) {
            alert('아이디, 비밀번호, 닉네임을 모두 입력해주세요.');
            return;
          }
          console.log(username, userId, userpw);

          // 서버에 데이터 전송
        fetch('/signup', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                username: userId,
                password: userpw,
                display_name: username,
            }),
        })
        .then((res) => res.json())
        .then((json) => {
            alert(json.msg);
            if (json.http_status == 201) {
                window.location.href = '/login';
            }
        });
      });  
  }; 
   </script>
    <div id="navbar-container"></div>

    <p></p>
    <body>
      <div id="wrap">
        <div id="main">
          <div id="head"></div>
            <div class="main-container">
              <br>
              <div class="main-left"></div>
              <div class="registration-pic"></div>
              <div class="registration-form">
                <br>
                <form method="POST" action="/signup">
                  <input type="text" placeholder="name" id="name"><br><br>
                  <input type="text" placeholder="ID" id="id"><br><br>
                  <input type="password" placeholder="Password" id="password"><br><br>
                  <button id="btn-registration">registration</button>
                </form>
              </div>
              <div class="main-right"></div>
            </div>
        </div>
        <script src="../Footer/footer.js"></script>
  </body>
</html>
